<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Checkout - Garg Glasses Co.</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<style>
    body{
      margin:0;
      font-family:'Poppins',sans-serif;
      background:linear-gradient(135deg,#e0e7ff 0%,#c7d2fe 100%);
      color:#1e293b;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.6;
      display:flex;
      flex-direction:column;
      min-height:100vh;
    }
    header{
      background:rgba(255 255 255 / 0.72);
      backdrop-filter:saturate(180%) blur(12px);
      padding:20px 32px;
      box-shadow:0 2px 8px rgb(0 0 0 / 0.04);
      display:flex;
      align-items:center;
      justify-content:space-between;
      position:sticky;
      top:0;
      z-index:100;
    }
    header h1{
      font-weight:800;
      font-size:1.75rem;
      color:#4f46e5;
      letter-spacing:1.2px;
      user-select:none;
      margin:0;
      cursor:default;
    }
    header a{
      color:#4338ca;
      font-weight:600;
      text-decoration:none;
      font-size:1rem;
      padding:8px 12px;
      border-radius:8px;
      transition:background-color .3s ease;
    }
    header a:hover, header a:focus{
      background-color:#4338ca;
      color:#fff;
      outline:none;
    }

    main{
      flex:1;
      max-width:980px;
      margin:60px auto 48px;
      padding:0 16px;
      display:grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap:22px;
    }
    @media (max-width: 860px){
      main{ grid-template-columns: 1fr; margin-top:40px; }
    }

    .card{
      background:#fff;
      border-radius:20px;
      box-shadow:0 15px 40px rgb(139 92 246 / 0.2);
      padding:28px;
    }

    .title{
      font-size:2rem;
      color:#7c3aed;
      font-weight:900;
      margin:0 0 18px;
      text-align:center;
      user-select:none;
    }

    .muted{
      color:#64748b;
      font-size:0.95rem;
      margin:0 0 14px;
      text-align:center;
    }

    .field{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-bottom:14px;
    }
    label{
      font-weight:700;
      color:#4338ca;
      font-size:0.95rem;
      user-select:none;
    }
    input, textarea{
      border:1px solid #e0e7ff;
      border-radius:14px;
      padding:12px 14px;
      font-size:1rem;
      outline:none;
      transition:border-color .2s ease, box-shadow .2s ease;
      font-family:'Poppins',sans-serif;
    }
    input:focus, textarea:focus{
      border-color:#a78bfa;
      box-shadow:0 0 0 4px rgb(167 139 250 / 0.25);
    }
    textarea{ min-height:110px; resize:vertical; }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 520px){
      .row{ grid-template-columns: 1fr; }
    }

    .btn{
      width:100%;
      margin-top:10px;
      background-color:#4338ca;
      color:#fff;
      border:none;
      padding:16px;
      font-size:1.15rem;
      font-weight:800;
      border-radius:20px;
      cursor:pointer;
      transition:background-color .3s ease, transform .05s ease;
      user-select:none;
    }
    .btn:hover, .btn:focus{
      background-color:#5b21b6;
      outline:none;
    }
    .btn:active{ transform: translateY(1px); }

    .btn-secondary{
      width:100%;
      margin-top:12px;
      background:transparent;
      border:2px solid #4338ca;
      color:#4338ca;
      padding:12px 16px;
      font-size:1rem;
      font-weight:800;
      border-radius:18px;
      cursor:pointer;
      transition:background-color .3s ease, color .3s ease;
      user-select:none;
    }
    .btn-secondary:hover, .btn-secondary:focus{
      background:#4338ca;
      color:#fff;
      outline:none;
    }

    .summary-title{
      font-weight:900;
      font-size:1.3rem;
      color:#4338ca;
      margin:0 0 14px;
      user-select:none;
    }

    .item{
      display:flex;
      align-items:center;
      gap:12px;
      padding:12px 0;
      border-bottom:1px solid #e0e7ff;
    }
    .item img{
      width:56px;
      height:56px;
      border-radius:12px;
      object-fit:cover;
      box-shadow:0 2px 8px rgb(147 197 253 / 0.25);
      flex:0 0 auto;
    }
    .item h4{
      margin:0;
      font-size:1rem;
      color:#4338ca;
      font-weight:800;
    }
    .item p{
      margin:2px 0 0;
      color:#64748b;
      font-weight:600;
      font-size:0.95rem;
    }
    .item-right{
      margin-left:auto;
      font-weight:900;
      color:#7c3aed;
      user-select:none;
    }

    .totals{
      margin-top:14px;
      padding-top:12px;
      border-top:1px solid #e0e7ff;
    }
    .totals .line{
      display:flex;
      justify-content:space-between;
      font-weight:800;
      color:#4338ca;
      margin:8px 0;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:rgb(67 56 202 / 0.08);
      color:#4338ca;
      font-weight:800;
      padding:8px 12px;
      border-radius:999px;
      user-select:none;
      justify-content:center;
      width:100%;
      margin-top:10px;
    }

    .empty{
      text-align:center;
      color:#64748b;
      font-style:italic;
      margin:18px 0 0;
      user-select:none;
    }

    footer{
      text-align:center;
      padding:24px 20px;
      font-weight:600;
      color:#64748b;
      font-size:1rem;
      background:#fff;
      border-top:1px solid #e0e7ff;
      user-select:none;
      box-shadow:inset 0 1px 0 rgb(101 116 253 / 0.1);
    }
  </style>
<link href="styles.css" rel="stylesheet"/></head>
<body>
<header>
<h1>Garg Glasses Co.</h1>
<nav aria-label="Primary navigation">
<a data-nav="index.html" href="index.html">Home</a>
<a data-nav="products.html" href="products.html">Products</a>
<a data-nav="about.html" href="about.html">About</a>
<a data-nav="contact.html" href="contact.html">Contact</a>
<a data-nav="faq.html" href="faq.html">FAQ</a>
<a data-nav="cart.html" href="cart.html">Cart</a>
<a data-nav="login.html" href="login.html" id="navAuthLink">Login</a>
</nav>
</header>
<main>
<!-- LEFT: Customer Details -->
<section aria-labelledby="checkoutTitle" class="card">
<h2 class="title" id="checkoutTitle">Checkout</h2>
<p class="muted">Fill your details to place the order. (Demo order saving in browser for now)</p>
<form autocomplete="on" id="checkoutForm">
<div class="field">
<label for="fullName">Full Name</label>
<input id="fullName" name="fullName" placeholder="Raghav Garg" required="" type="text"/>
</div>
<div class="row">
<div class="field">
<label for="phone">Phone Number</label>
<input id="phone" name="phone" placeholder="10-digit number" required="" type="tel"/>
</div>
<div class="field">
<label for="payment">Payment Method</label>
<input id="payment" name="payment" readonly="" type="text" value="Cash on Delivery (COD)"/>
</div>
</div>
<div class="field">
<label for="address">Delivery Address</label>
<textarea id="address" name="address" placeholder="House no, Street, City, State, Pincode" required=""></textarea>
</div>
<button class="btn" type="submit">Place Order</button>
<button class="btn-secondary" id="backToCartBtn" type="button">Back to Cart</button>
<div class="badge" id="cartInfoBadge" style="display:none;">
<span aria-hidden="true" class="material-icons" style="font-size:18px;">shopping_cart</span>
<span><span id="badgeQty">0</span> item(s) ready to checkout</span>
</div>
<p class="empty" id="emptyCheckoutMessage" style="display:none;">
          Your cart is empty. Please add items first.
        </p>
</form>
</section>
<!-- RIGHT: Order Summary -->
<aside aria-labelledby="summaryTitle" class="card">
<h3 class="summary-title" id="summaryTitle">Order Summary</h3>
<div id="summaryItems"></div>
<div class="totals" id="summaryTotals" style="display:none;">
<div class="line">
<span>Total Items</span>
<span id="summaryQty">0</span>
</div>
</div>
<p class="empty" id="summaryEmpty" style="display:none;">No items to show.</p>
</aside>
</main>
<footer>
    © 2025 Garg Glasses Co. | All rights reserved
  </footer>
<script>
    // Uses same cart key as your cart.html
    const CART_KEY = "gargCart";
    const ORDERS_KEY = "gargOrders";

    const summaryItems = document.getElementById("summaryItems");
    const summaryTotals = document.getElementById("summaryTotals");
    const summaryQty = document.getElementById("summaryQty");

    const summaryEmpty = document.getElementById("summaryEmpty");
    const emptyCheckoutMessage = document.getElementById("emptyCheckoutMessage");
    const cartInfoBadge = document.getElementById("cartInfoBadge");
    const badgeQty = document.getElementById("badgeQty");

    const checkoutForm = document.getElementById("checkoutForm");
    const backToCartBtn = document.getElementById("backToCartBtn");

    function getCart() {
      return JSON.parse(localStorage.getItem(CART_KEY)) || [];
    }

    function saveCart(cart) {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
    }

    function getOrders() {
      return JSON.parse(localStorage.getItem(ORDERS_KEY)) || [];
    }

    function saveOrders(orders) {
      localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));
    }

    function renderSummary() {
      const cart = getCart();

      summaryItems.innerHTML = "";

      if (cart.length === 0) {
        summaryEmpty.style.display = "block";
        summaryTotals.style.display = "none";
        emptyCheckoutMessage.style.display = "block";
        cartInfoBadge.style.display = "none";
        return;
      }

      summaryEmpty.style.display = "none";
      summaryTotals.style.display = "block";
      emptyCheckoutMessage.style.display = "none";
      cartInfoBadge.style.display = "flex";

      let totalQty = 0;

      cart.forEach(item => {
        totalQty += item.qty;

        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <img src="${item.imgSrc}" alt="${item.title}" />
          <div>
            <h4>${item.title}</h4>
            <p>Qty: ${item.qty}</p>
          </div>
          <div class="item-right">x${item.qty}</div>
        `;
        summaryItems.appendChild(div);
      });

      summaryQty.textContent = totalQty;
      badgeQty.textContent = totalQty;
    }

    function validatePhone(phone) {
      // simple India-friendly validation: 10 digits
      const digitsOnly = phone.replace(/\D/g, "");
      return digitsOnly.length === 10;
    }

    backToCartBtn.addEventListener("click", () => {
      window.location.href = "cart.html";
    });

    checkoutForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const cart = getCart();
      if (cart.length === 0) {
        alert("Your cart is empty. Please add items first.");
        return;
      }

      const name = document.getElementById("fullName").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const address = document.getElementById("address").value.trim();

      if (!name || !phone || !address) {
        alert("Please fill all details.");
        return;
      }

      if (!validatePhone(phone)) {
        alert("Please enter a valid 10-digit phone number.");
        return;
      }

      // Create order object (saved locally for now)
      const order = {
        id: "ORD-" + Date.now(),
        customer: { name, phone, address },
        items: cart,
        totalQty: cart.reduce((sum, i) => sum + i.qty, 0),
        createdAt: new Date().toISOString()
      };

      const orders = getOrders();
      orders.unshift(order);
      saveOrders(orders);

      // Clear cart after placing order
      saveCart([]);

      alert("Order placed successfully ✅");

      // Redirect (change to order-success.html if you create it)
      window.location.href = "index.html";
    });

    // Init
    renderSummary();
  </script>

<script src="main.js"></script></body>
</html>
